#!/usr/bin/env node

const { createCommand } = require('commander');
const { tinypng, createVideoPoster } = require('../lib');

const program = createCommand();

// 设置版本号
program
	.usage('<command> [options]')
	.version(require('../package.json').version);

// 注册命令
program
	.command('png')
	.description('start compress images')
	.option('-i, --input <string>', 'input directory')
	.option('-o, --output <string>', 'output directory')
	.option('-ext, --extname <string>', 'filter files by extname')
	.option('-d, --deep', 'recursion directory?', false)
	.action(tinypng);

program
	.command('poster')
	.description('start create video poster by ffmpeg')
	.option('-i, --input <string>', 'input directory')
	.option('-o, --output <string>', 'output directory')
	.option('-ext, --extname <string>', 'filter files by extname')
	.option('-d, --deep', 'recursion directory?', false)
	.option('-p, --position <number>', 'recursion directory?', 0)
	.option('-c, --compress', 'recursion directory?', false)
	.action(createVideoPoster);

// 开始解析
program.parse(process.argv);

if (!program.args.length) {
	program.outputHelp();
}
